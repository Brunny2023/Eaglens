name: Verify Paystack Secret

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - name: Check Secret Presence
        env:
          PAYSTACK_KEY: ${{ secrets.PAYSTACK_SECRET_KEY }}
        run: |
          if [ -z "$PAYSTACK_KEY" ]; then
            echo "SECRET_STATUS=MISSING"
            exit 1
          else
            echo "SECRET_STATUS=ACTIVE"
            # We don't print the key for security, just confirm it has length
            echo "Secret is present and has length ${#PAYSTACK_KEY}"
          fi
